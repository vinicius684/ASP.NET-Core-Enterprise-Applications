@model NSE.WebApp.MVC.Models.UsuarioRegistro

@{
    ViewData["Title"] = "Registro";
}

<section class="section-conten padding-y container" style="min-height: 45vh">

    <vc:Summary></vc:Summary>

    <div class="card mx-auto" style="max-width: 380px; margin-top: 100px;">

        <div class="card-body">
            <h4 class="card-title mb-4">Seja bem vindo!</h4>

            <form id="meuFormulario" asp-route-returnurl="@ViewData["ReturnUrl"]" method="post">
                 <div class="form-group">
                    <label asp-for="Nome"></label>
                    <input asp-for="Nome" class="form-control" />
                    <span asp-validation-for="Nome" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label for="cpf" asp-for="Cpf"></label>
                    <input type="text" id="cpf" name="cpf" maxlength="14" required asp-for="Cpf" class="form-control" />
                    <span asp-validation-for="Cpf" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label asp-for="Email"></label>
                    <input asp-for="Email" class="form-control" />
                    <span asp-validation-for="Email" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Senha"></label>
                    <input type="password" asp-for="Senha" class="form-control" />
                    <span asp-validation-for="Senha" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label asp-for="SenhaConfirmacao"></label>
                    <input type="password" asp-for="SenhaConfirmacao" class="form-control" />
                    <span asp-validation-for="SenhaConfirmacao" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <button type="submit" class="btn btn-primary btn-block">Registrar</button>
                </div>
            </form>
        </div>
        <div class="card-footer text-center">Já tem uma conta?<a asp-controller="Identidade" asp-action="Login"> Entrar</a></div>
    </div>

</section>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}

<script>
// Função para formatar o CPF enquanto o usuário digita
document.getElementById('cpf').addEventListener('input', function (e) {
    let value = e.target.value;

    // Remove qualquer caractere que não seja número
    value = value.replace(/\D/g, '');

    // Adiciona os pontos e o traço da formatação do CPF
    if (value.length > 3) value = value.slice(0, 3) + '.' + value.slice(3);
    if (value.length > 7) value = value.slice(0, 7) + '.' + value.slice(7);
    if (value.length > 11) value = value.slice(0, 11) + '-' + value.slice(11, 13);

    e.target.value = value;
});

// Antes de enviar, remove a formatação (pontos e traço)
document.getElementById('meuFormulario').addEventListener('submit', function (e) {
    const cpfInput = document.getElementById('cpf');
    cpfInput.value = cpfInput.value.replace(/\D/g, ''); // Remove todos os não numéricos
});ElonM
</script>